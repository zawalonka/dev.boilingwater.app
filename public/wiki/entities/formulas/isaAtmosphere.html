<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>isaAtmosphere</title>
  <link rel="stylesheet" href="/wiki/assets/styles.css" />
</head>
<body>
  <div class="wiki-layout">
    <div class="wiki-main">
      <header class="wiki-topbar">
        <details class="wiki-menu" aria-label="Menu">
          <summary>☰</summary>
          <nav class="wiki-menu-links">
            <a href="/wiki/index.html">Main page</a>
            <a href="/wiki/entities/elements/index.html">Elements</a>
            <a href="/wiki/entities/compounds/index.html">Compounds</a>
            <a href="/wiki/entities/solutions/index.html">Solutions</a>
            <a href="/wiki/entities/phases/index.html">Phases</a>
            <a href="/wiki/entities/levels/index.html">Levels</a>
            <a href="/wiki/entities/experiments/index.html">Experiments</a>
            <a href="/wiki/entities/formulas/index.html">Formulas</a>
            <a href="/wiki/entities/processes/index.html">Processes</a>
            <a href="/wiki/entities/modules/index.html">Modules</a>
            <a href="/wiki/entities/symbols/index.html">Symbols</a>
            <a href="/wiki/entities/public/index.html">Public Files</a>
            <div class="wiki-menu-divider"></div>
            <a href="/">Back to Game</a>
          </nav>
        </details>
        <div class="wiki-topbar-title">isaAtmosphere</div>
      </header>
      <main class="wiki-content">
        <article class="wiki-article">
          
      
    <aside class="infobox">
      <div class="infobox-title">isaAtmosphere</div>
      
      <div class="infobox-row">
        <div class="infobox-label">Type</div>
        <div class="infobox-value">Formula</div>
      </div>
    
      <div class="infobox-row">
        <div class="infobox-label">Exports</div>
        <div class="infobox-value"><ul><li><a href="/wiki/entities/symbols/calculateAltitudeFromPressure.html">calculateAltitudeFromPressure</a></li><li><a href="/wiki/entities/symbols/calculatePressureISA.html">calculatePressureISA</a></li><li><a href="/wiki/entities/symbols/calculateTemperatureISA.html">calculateTemperatureISA</a></li></ul></div>
      </div>
    
      <div class="infobox-row">
        <div class="infobox-label">Processes</div>
        <div class="infobox-value"><ul><li><a href="/wiki/entities/processes/boilingPoint/_isaAtmosphere.html">boilingPoint/_isaAtmosphere</a></li></ul></div>
      </div>
    
      <div class="infobox-row">
        <div class="infobox-label">Used in</div>
        <div class="infobox-value"><ul><li><a href="/wiki/entities/modules/utils/physics/index.html">index.js</a></li></ul></div>
      </div>
    
    </aside>
  
      <section class="section">
        
  <div class="entity-header">
    <h1>isaAtmosphere</h1>
    <p class="subtitle">Formula</p>
  </div>

      </section>
      
    <section class="section">
      <h2>Educational notes</h2>
      <p>ISA (INTERNATIONAL STANDARD ATMOSPHERE)</p>
<p>========================================</p>
<p>The International Standard Atmosphere is a model of how atmospheric</p>
<p>pressure and temperature vary with altitude. It&#39;s the global standard</p>
<p>used in aviation, meteorology, and engineering.</p>
<p>KEY INSIGHT:</p>
<p>Temperature DECREASES with altitude in the troposphere (0-11km).</p>
<p>This temperature drop causes pressure to decrease faster than a</p>
<p>simple &quot;isothermal&quot; model would predict.</p>
<p>TROPOSPHERE MODEL (0-11km):</p>
<pre class="code">T = T₀ - L × h     (temperature decreases linearly)
P = P₀ × (T/T₀)^(g×M/(R×L))  (pressure follows)</pre>
<p>CONSTANTS:</p>
<p>T₀ = 288.15 K (15°C at sea level)</p>
<pre class="code">L  = 0.0065 K/m (temperature lapse rate)</pre>
<p>P₀ = 101,325 Pa (standard sea level pressure)</p>
<pre class="code">g  = 9.80665 m/s² (standard gravity)
M  = 0.0289644 kg/mol (molar mass of dry air)
R  = 8.31447 J/(mol·K) (universal gas constant)</pre>
<p>REAL-WORLD EXAMPLES:</p>
<p>Sea level (0m):      101,325 Pa → water boils at 100°C</p>
<p>Denver (1,609m):      83,436 Pa → water boils at ~95°C</p>
<p>La Paz (3,640m):      64,591 Pa → water boils at ~87°C</p>
<p>Mt. Everest (8,848m): 31,436 Pa → water boils at ~70°C</p>
<p>10,000m:              26,436 Pa → water boils at ~66°C</p>
<p>WHY NOT SIMPLER FORMULAS?</p>
<p>The &quot;barometric formula&quot; (P = P₀ × e^(-Mgh/RT)) assumes constant temperature.</p>
<p>This gives WRONG results at high altitude:</p>
<p>- Barometric at 10km: ~30,900 Pa</p>
<p>- ISA at 10km: ~26,400 Pa (more accurate)</p>
<p>- Error: ~17%!</p>
<pre class="code">@see https://en.wikipedia.org/wiki/International_Standard_Atmosphere
@see ICAO Doc 7488 for official standard</pre>
    </section>
  
      <section class="section">
        <h2>Source file</h2>
        <p><code>src\utils\physics\formulas\isaAtmosphere.js</code></p>
        <details>
          <summary>View source code</summary>
          <pre class="code">/**
 * ISA (INTERNATIONAL STANDARD ATMOSPHERE)
 * ========================================
 * 
 * The International Standard Atmosphere is a model of how atmospheric
 * pressure and temperature vary with altitude. It&#39;s the global standard
 * used in aviation, meteorology, and engineering.
 * 
 * KEY INSIGHT:
 * Temperature DECREASES with altitude in the troposphere (0-11km).
 * This temperature drop causes pressure to decrease faster than a
 * simple &quot;isothermal&quot; model would predict.
 * 
 * TROPOSPHERE MODEL (0-11km):
 *   T = T₀ - L × h     (temperature decreases linearly)
 *   P = P₀ × (T/T₀)^(g×M/(R×L))  (pressure follows)
 * 
 * CONSTANTS:
 *   T₀ = 288.15 K (15°C at sea level)
 *   L  = 0.0065 K/m (temperature lapse rate)
 *   P₀ = 101,325 Pa (standard sea level pressure)
 *   g  = 9.80665 m/s² (standard gravity)
 *   M  = 0.0289644 kg/mol (molar mass of dry air)
 *   R  = 8.31447 J/(mol·K) (universal gas constant)
 * 
 * REAL-WORLD EXAMPLES:
 *   Sea level (0m):      101,325 Pa → water boils at 100°C
 *   Denver (1,609m):      83,436 Pa → water boils at ~95°C
 *   La Paz (3,640m):      64,591 Pa → water boils at ~87°C
 *   Mt. Everest (8,848m): 31,436 Pa → water boils at ~70°C
 *   10,000m:              26,436 Pa → water boils at ~66°C
 * 
 * WHY NOT SIMPLER FORMULAS?
 * The &quot;barometric formula&quot; (P = P₀ × e^(-Mgh/RT)) assumes constant temperature.
 * This gives WRONG results at high altitude:
 *   - Barometric at 10km: ~30,900 Pa
 *   - ISA at 10km: ~26,400 Pa (more accurate)
 *   - Error: ~17%!
 * 
 * @see https://en.wikipedia.org/wiki/International_Standard_Atmosphere
 * @see ICAO Doc 7488 for official standard
 */

import { ATMOSPHERE } from &#39;../../../constants/physics.js&#39;

// ISA Troposphere Constants
const ISA = {
  T0: 288.15,           // Sea level temperature (K)
  L: 0.0065,            // Temperature lapse rate (K/m)
  P0: 101325,           // Sea level pressure (Pa)
  g: 9.80665,           // Standard gravity (m/s²)
  M: 0.0289644,         // Molar mass of dry air (kg/mol)
  R: 8.31447,           // Universal gas constant (J/(mol·K))
}

// Pre-calculate the exponent (it&#39;s a constant)
// (g × M) / (R × L) ≈ 5.2559
const ISA_EXPONENT = (ISA.g * ISA.M) / (ISA.R * ISA.L)

/**
 * Calculate atmospheric pressure at a given altitude using ISA troposphere model
 * 
 * @param {number} altitudeM - Altitude in meters above sea level
 * @returns {number} Atmospheric pressure in Pascals
 */
export function calculatePressureISA(altitudeM) {
  // Safety: treat null/undefined/NaN as sea level
  if (altitudeM === null || altitudeM === undefined || Number.isNaN(altitudeM)) {
    altitudeM = 0
  }
  
  // Calculate temperature at altitude: T = T₀ - L × h
  const T = ISA.T0 - ISA.L * altitudeM
  
  // Handle extreme altitudes (above troposphere at ~11km)
  if (T &lt;= 0) {
    // Troposphere ends at ~11km. Return pressure at that boundary.
    const T11km = ISA.T0 - ISA.L * 11000  // ~216.65 K
    return ISA.P0 * Math.pow(T11km / ISA.T0, ISA_EXPONENT)  // ~22,632 Pa
  }
  
  // ISA pressure formula: P = P₀ × (T/T₀)^exponent
  const pressure = ISA.P0 * Math.pow(T / ISA.T0, ISA_EXPONENT)
  
  return pressure
}

/**
 * Calculate temperature at a given altitude using ISA lapse rate
 * (Useful for atmospheric modeling, not directly for boiling point)
 * 
 * @param {number} altitudeM - Altitude in meters
 * @returns {number} Temperature in Kelvin
 */
export function calculateTemperatureISA(altitudeM) {
  if (altitudeM === null || altitudeM === undefined || Number.isNaN(altitudeM)) {
    altitudeM = 0
  }
  
  const T = ISA.T0 - ISA.L * altitudeM
  
  // Clamp at tropopause (~11km, ~216.65K)
  return Math.max(T, 216.65)
}

/**
 * Reverse calculation: Find altitude from pressure
 * (Useful for &quot;what altitude gives this pressure?&quot; questions)
 * 
 * @param {number} pressurePa - Atmospheric pressure in Pascals
 * @returns {number} Altitude in meters
 */
export function calculateAltitudeFromPressure(pressurePa) {
  if (pressurePa &gt;= ISA.P0) return 0
  if (pressurePa &lt;= 0) return Infinity
  
  // Invert the ISA formula:
  // P = P₀ × (T/T₀)^exp
  // (P/P₀)^(1/exp) = T/T₀
  // T = T₀ × (P/P₀)^(1/exp)
  // T₀ - L×h = T₀ × (P/P₀)^(1/exp)
  // h = (T₀ - T₀ × (P/P₀)^(1/exp)) / L
  // h = T₀/L × (1 - (P/P₀)^(1/exp))
  
  const pressureRatio = pressurePa / ISA.P0
  const tempRatio = Math.pow(pressureRatio, 1 / ISA_EXPONENT)
  const altitude = (ISA.T0 / ISA.L) * (1 - tempRatio)
  
  return altitude
}
</pre>
        </details>
      </section>
    
        </article>
      </main>
    </div>
  </div>
</body>
</html>