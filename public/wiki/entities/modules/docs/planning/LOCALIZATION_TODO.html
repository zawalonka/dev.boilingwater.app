<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>LOCALIZATION_TODO.md - Boiling Water Wiki</title>
  <link rel="stylesheet" href="/wiki/assets/styles.css" />
  <!-- Kekule CSS loaded lazily when molecule viewer is needed -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/themes/prism.min.css" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/line-numbers/prism-line-numbers.min.css" />
</head>
<body>
  <div class="wiki-layout">
    <div class="wiki-main">
      <header class="wiki-topbar">
        <details class="wiki-menu" aria-label="Menu">
          <summary>‚ò∞ Menu</summary>
          <nav class="wiki-menu-links">
            <div class="menu-section">
              <div class="menu-heading">Main</div>
              <a href="/wiki/index.html">üìö Main page</a>
            </div>
            <div class="menu-section">
              <div class="menu-heading">Science</div>
              <a href="/wiki/entities/elements/index.html">‚öõÔ∏è Elements</a>
              <a href="/wiki/entities/compounds/index.html">üß™ Compounds</a>
              <a href="/wiki/entities/solutions/index.html">üíß Solutions</a>
              <a href="/wiki/entities/phases/index.html">‚ùÑÔ∏è Phases</a>
            </div>
            <div class="menu-section">
              <div class="menu-heading">Game Structure</div>
              <a href="/wiki/entities/levels/index.html">üìä Levels</a>
              <a href="/wiki/entities/experiments/index.html">üî¨ Experiments</a>
            </div>
            <div class="menu-section">
              <div class="menu-heading">Code Reference</div>
              <a href="/wiki/entities/formulas/index.html">üìê Formulas</a>
              <a href="/wiki/entities/processes/index.html">‚öôÔ∏è Processes</a>
              <a href="/wiki/entities/modules/index.html">üì¶ Modules</a>
              <a href="/wiki/entities/symbols/index.html">üî£ Symbols</a>
              <a href="/wiki/entities/public/index.html">üìÅ Public Files</a>
              <a href="/wiki/entities/assets/index.html">üñºÔ∏è Assets</a>
            </div>
            <div class="menu-section">
              <div class="menu-heading">Repository</div>
              <a href="/wiki/entities/docs/index.html">üìñ Docs</a>
              <a href="/wiki/entities/scripts/index.html">üß∞ Scripts</a>
              <a href="/wiki/entities/styles/index.html">üé® Styles</a>
              <a href="/wiki/entities/root-files/index.html">üóÇÔ∏è Root Files</a>
              <a href="/wiki/entities/reports/changes-since-last-commit.html">üß≠ Changes</a>
            </div>
            <div class="wiki-menu-divider"></div>
            <a href="/">‚¨ÖÔ∏è Back to Game</a>
          </nav>
        </details>
        
        <nav class="breadcrumbs" aria-label="Breadcrumb">
          <a href="/wiki/../../../index.html">Main</a> <span class="breadcrumb-sep">‚Ä∫</span> <a href="/wiki/../index.html">Modules</a> <span class="breadcrumb-sep">‚Ä∫</span> <a href="/wiki/../docs/index.html">docs</a> <span class="breadcrumb-sep">‚Ä∫</span> <a href="/wiki/../docs/planning/index.html">planning</a> <span class="breadcrumb-sep">‚Ä∫</span> <span>LOCALIZATION_TODO.md</span>
        </nav>
        <div class="wiki-topbar-title">LOCALIZATION_TODO.md</div>
      </header>
      <main class="wiki-content">
        
        <article class="wiki-article">
          
      
    <aside class="infobox">
      <div class="infobox-title">LOCALIZATION_TODO.md</div>
      
      <div class="infobox-row">
        <div class="infobox-label">Type</div>
        <div class="infobox-value">Module</div>
      </div>
    
      <div class="infobox-row">
        <div class="infobox-label">File type</div>
        <div class="infobox-value">md</div>
      </div>
    
    </aside>
  
      <section class="section">
        
  <div class="entity-header">
    <h1>LOCALIZATION_TODO.md</h1>
    <p class="subtitle">Module</p>
  </div>

      </section>
      
      <section class="section" id="source-file">
        <h2>Source file</h2>
        <p><code>docs\planning\LOCALIZATION_TODO.md</code></p>
        <details>
          <summary>View source code</summary>
          <pre class="line-numbers"><code class="language-markdown"># Localization / Internationalization (i18n) TODO

&gt; **Status:** PLANNING ‚Äî Depends on Accessibility Phase 1 completion  
&gt; **Target First Language:** Spanish (es)  
&gt; **Estimated Effort:** 30-40 hours (architecture + Spanish translation)  
&gt; **Priority:** DEFERRED ‚Äî After accessibility adds complete UI string set

---

## üìã OVERVIEW

Enable Boiling Water to support multiple languages. Start with a robust architecture that makes adding new languages trivial.

**Why After Accessibility:**
- Accessibility improvements will add new strings (aria-labels, keyboard hints, sr-only descriptions)
- Better to build localization infrastructure once with the final, complete string set
- Avoids translating strings twice

**Scope:** Game UI, wiki content, substance descriptions, errors/alerts, experiment instructions

---

## üèóÔ∏è ARCHITECTURE

### File Structure
**Location:** `public/locales/`

```
public/locales/
‚îú‚îÄ‚îÄ en.json          # English (default/master)
‚îú‚îÄ‚îÄ es.json          # Spanish
‚îú‚îÄ‚îÄ fr.json          # French (future)
‚îî‚îÄ‚îÄ de.json          # German (future)
```

### Key Naming Conventions

**Hierarchical structure** for maintainability:
```json
{
  &quot;game&quot;: {
    &quot;title&quot;: &quot;Boiling Water&quot;,
    &quot;subtitle&quot;: &quot;Learn Physics Through Interactive Simulation&quot;,
    &quot;controls&quot;: {
      &quot;burner&quot;: &quot;Burner&quot;,
      &quot;burner_up&quot;: &quot;Increase Heat&quot;,
      &quot;burner_down&quot;: &quot;Decrease Heat&quot;
    }
  },
  &quot;experiment&quot;: {
    &quot;boiling_water&quot;: &quot;Boiling Water&quot;,
    &quot;altitude_effect&quot;: &quot;Altitude&#39;s Effect on Boiling Point&quot;,
    &quot;different_fluids&quot;: &quot;Different Substances&quot;
  },
  &quot;room&quot;: {
    &quot;ac_unit&quot;: &quot;Air Conditioner&quot;,
    &quot;air_handler&quot;: &quot;Air Handler&quot;
  },
  &quot;error&quot;: {
    &quot;location_not_found&quot;: &quot;Location not found. Try another search.&quot;,
    &quot;invalid_altitude&quot;: &quot;Altitude must be between -430m and 11,000m&quot;
  }
}
```

**Naming rules:**
- `snake_case` for keys (all lowercase, underscores for spaces)
- Hierarchical organization (objects nested by feature area)
- English text as default values
- Comments for context (translator notes)

---

## üîß IMPLEMENTATION TASKS

### Phase 1: Architecture (10-12 hours)

- [ ] **Localization Hook/Context**
  - [ ] Create `src/hooks/useLocalization.js` OR `src/contexts/LocalizationContext.jsx`
  - [ ] Load locale JSON files dynamically (e.g., `import en from &#39;public/locales/en.json&#39;`)
  - [ ] Provide `t(key)` function: `t(&#39;game.title&#39;)` ‚Üí &quot;Boiling Water&quot;
  - [ ] Support fallback to English if translation missing
  - [ ] Return current language + function to switch language

- [ ] **Locale Persistence**
  - [ ] Save selected language to localStorage on change
  - [ ] Load saved language on app startup
  - [ ] Default to browser language if available, else English

- [ ] **Create Master English Localization File**
  - [ ] Extract all hardcoded strings from React components
  - [ ] Create `public/locales/en.json` with all game strings
  - [ ] Organize hierarchically (game, experiment, room, error, etc.)
  - [ ] Include context comments for translators

- [ ] **Language Picker UI**
  - [ ] Add language selector to Header.jsx (top-right corner)
  - [ ] Display flag emoji or language code (ES, EN, FR, DE)
  - [ ] Wire to locale context to switch language
  - [ ] Show selected language indicator

### Phase 2: String Integration (15-18 hours)

- [ ] **Replace Hardcoded Strings in Components**
  - [ ] `src/components/Header.jsx` ‚Äî Navigation labels, dropdowns
  - [ ] `src/components/ControlPanel.jsx` ‚Äî Temperature, timer, location labels
  - [ ] `src/components/GameScene.jsx` ‚Äî Pot, burner, steam labels
  - [ ] `src/components/RoomControls.jsx` ‚Äî AC, air handler labels
  - [ ] Verify all UI strings use `t()` function

- [ ] **Update Experiment Data**
  - [ ] Move experiment names/descriptions to localization
  - [ ] `EXPERIMENTS` in `src/constants/workshops.js` should reference i18n keys
  - [ ] Example: `name: &#39;experiment.boiling_water&#39;` ‚Üí rendered via `t()`

- [ ] **Update Error Messages**
  - [ ] Location search errors: &quot;Location not found&quot;
  - [ ] Altitude validation: &quot;Altitude must be between -430m and 11,000m&quot;
  - [ ] Physics errors: &quot;Boiling point calculation outside verified range&quot;
  - [ ] All errors should use `t(&#39;error.key&#39;)`

- [ ] **Update Substance Descriptions**
  - [ ] Substance names (water, ethanol, acetone, etc.)
  - [ ] Phase state names (solid, liquid, gas)
  - [ ] Safety notes, uses, properties
  - [ ] Consider: Keep educational notes in English for now, localize later

### Phase 3: Spanish Localization (8-10 hours)

- [ ] **Create Spanish Translation File**
  - [ ] `public/locales/es.json` with all strings from en.json
  - [ ] Professional translation (not machine translation)
  - [ ] Consider hiring a translator for educational accuracy

- [ ] **Verify Spanish Rendering**
  - [ ] Test all UI components in Spanish
  - [ ] Check text overflow/layout issues (Spanish text is ~10-30% longer)
  - [ ] Verify RTL support not needed (Spanish is LTR)
  - [ ] Test special characters (√°, √©, √≠, √≥, √∫, √±)

### Phase 4: QA &amp; Documentation (5-6 hours)

- [ ] **Testing**
  - [ ] Switch language via UI ‚Üí verify all strings update
  - [ ] Refresh page ‚Üí verify language persists (localStorage)
  - [ ] Test fallback (remove one key ‚Üí verify English shows)
  - [ ] Test on mobile (language picker visible, not crowded)

- [ ] **Documentation**
  - [ ] Add &quot;How to Add a New Language&quot; guide
  - [ ] Document key naming conventions
  - [ ] Create translation checklist (all keys translated)
  - [ ] List any keys that should NOT be translated (technical terms, proper nouns)

- [ ] **Translation Workflow**
  - [ ] Create GitHub issue template for translation requests
  - [ ] Document review process (verify accuracy, completeness)
  - [ ] Set up contributor credit tracking

---

## üìù MASTER ENGLISH LOCALIZATION STRUCTURE

**Example `public/locales/en.json`:**

```json
{
  &quot;_meta&quot;: {
    &quot;language&quot;: &quot;English&quot;,
    &quot;languageCode&quot;: &quot;en&quot;,
    &quot;lastUpdated&quot;: &quot;2026-02-02&quot;,
    &quot;translator&quot;: &quot;Boiling Water Team&quot;
  },

  &quot;game&quot;: {
    &quot;title&quot;: &quot;Boiling Water&quot;,
    &quot;subtitle&quot;: &quot;Learn Physics Through Interactive Simulation&quot;,
    &quot;status&quot;: &quot;Pre-Alpha&quot;
  },

  &quot;header&quot;: {
    &quot;level&quot;: &quot;Level:&quot;,
    &quot;experiment&quot;: &quot;Experiment:&quot;,
    &quot;workshop&quot;: &quot;Workshop:&quot;,
    &quot;menu&quot;: &quot;Menu&quot;
  },

  &quot;controls&quot;: {
    &quot;burner&quot;: &quot;Burner&quot;,
    &quot;burner_up&quot;: &quot;Increase Heat&quot;,
    &quot;burner_down&quot;: &quot;Decrease Heat&quot;,
    &quot;burner_off&quot;: &quot;Off&quot;,
    &quot;speed&quot;: &quot;Speed:&quot;,
    &quot;timer&quot;: &quot;Timer:&quot;,
    &quot;timer_start&quot;: &quot;Start Timer&quot;,
    &quot;timer_pause&quot;: &quot;Pause Timer&quot;,
    &quot;timer_reset&quot;: &quot;Reset Timer&quot;
  },

  &quot;experiment&quot;: {
    &quot;boiling_water&quot;: &quot;Boiling Water&quot;,
    &quot;altitude_effect&quot;: &quot;Altitude&#39;s Effect on Boiling Point&quot;,
    &quot;different_fluids&quot;: &quot;Different Substances&quot;,
    &quot;dangerous_liquids&quot;: &quot;Dangerous Liquids&quot;
  },

  &quot;location&quot;: {
    &quot;search&quot;: &quot;Search for a Location (Worldwide)&quot;,
    &quot;enter_manually&quot;: &quot;Enter Altitude Manually&quot;,
    &quot;placeholder&quot;: &quot;City, landmark, or place (Death Valley, Mt Everest, Tokyo)&quot;,
    &quot;altitude_label&quot;: &quot;Altitude (meters)&quot;,
    &quot;set_location&quot;: &quot;üìç Set Your Location&quot;,
    &quot;determining&quot;: &quot;Determining altitude from location...&quot;
  },

  &quot;substance&quot;: {
    &quot;label&quot;: &quot;Substance:&quot;,
    &quot;water&quot;: &quot;Water&quot;,
    &quot;ethanol&quot;: &quot;Ethanol&quot;,
    &quot;acetone&quot;: &quot;Acetone&quot;,
    &quot;ammonia&quot;: &quot;Ammonia&quot;
  },

  &quot;room&quot;: {
    &quot;ac_unit&quot;: &quot;AC Unit:&quot;,
    &quot;air_handler&quot;: &quot;Air Handler:&quot;,
    &quot;ac_setpoint&quot;: &quot;AC Setpoint:&quot;,
    &quot;decrease&quot;: &quot;Decrease&quot;,
    &quot;increase&quot;: &quot;Increase&quot;
  },

  &quot;temperature&quot;: {
    &quot;label&quot;: &quot;Temperature:&quot;,
    &quot;celsius&quot;: &quot;¬∞C&quot;,
    &quot;fahrenheit&quot;: &quot;¬∞F&quot;
  },

  &quot;error&quot;: {
    &quot;location_not_found&quot;: &quot;Location not found. Try another search.&quot;,
    &quot;invalid_altitude&quot;: &quot;Altitude must be between -430m and 11,000m.&quot;,
    &quot;boiling_point_extrapolated&quot;: &quot;Boiling point calculation outside verified range. Results are estimated.&quot;,
    &quot;substance_not_available&quot;: &quot;Substance not available in this experiment.&quot;
  },

  &quot;success&quot;: {
    &quot;boiling_detected&quot;: &quot;üéâ Boiling detected!&quot;,
    &quot;experiment_complete&quot;: &quot;Experiment complete!&quot;
  }
}
```

---

## üöÄ IMPLEMENTATION ORDER

1. **Build infrastructure first** (hook, context, localStorage)
2. **Extract English strings** into en.json
3. **Integrate strings** into components
4. **Add language picker**
5. **Create Spanish translation**
6. **Test thoroughly**
7. **Document translation process**

---

## üìã TRANSLATION CHECKLIST

Before releasing a new language:

- [ ] All keys in en.json have translations in {lang}.json
- [ ] No missing keys (use key name as fallback ‚Üí obvious placeholder)
- [ ] No untranslated English text hardcoded in components
- [ ] Text layout verified (no overflow, readability OK)
- [ ] Special characters render correctly
- [ ] Translated strings contextually accurate (not just machine translation)
- [ ] Cultural appropriateness verified (no offensive idioms, etc.)
- [ ] Contributor credit recorded

---

## üåç FUTURE LANGUAGES

**Planned (Post-Spanish):**
- French (fr) ‚Äî Educational reach in francophone countries
- German (de) ‚Äî Strong physics education culture
- Portuguese (pt) ‚Äî Large Spanish-speaking audience overlap
- Mandarin Chinese (zh) ‚Äî Massive education market
- Japanese (ja) ‚Äî High-quality STEM education interest

**Criteria for adding languages:**
- &gt;100K speakers in developed nations
- Strong STEM education infrastructure
- Community translation offer (avoid machine translation)
- At least 5 volunteers for translation + review

---

## üí¨ TRANSLATOR NOTES

**Common Translation Pitfalls to Avoid:**

1. **Don&#39;t translate technical terms**
   - &quot;Boiling point&quot; (f√≠sica: &quot;punto de ebullici√≥n&quot;)
   - &quot;Burner&quot; (cocina: &quot;quemador&quot;)
   - Keep consistency with scientific textbooks

2. **Watch for text expansion**
   - English: &quot;Altitude&quot; (8 chars)
   - Spanish: &quot;Altitud&quot; (7 chars) ‚úì (good)
   - German: &quot;H√∂he √ºber dem Meeresspiegel&quot; (too long!)
   - Test in UI after translation

3. **Avoid colloquialisms**
   - Example: &quot;Crank up the heat&quot; ‚Üí Use formal &quot;Increase heat&quot;
   - Educational tone, not casual chat

4. **Verify scientific accuracy**
   - Some translations lose precision
   - Example: &quot;boiling point&quot; vs &quot;bullici√≥n point&quot; (wrong)
   - Consult NIST, IUPAC for official terms

5. **Context matters**
   - &quot;Temperature&quot; in experiment vs. &quot;room temperature&quot;
   - Translator should understand physics context

---

## üîó RELATED DOCS

- [ACCESSIBILITY_TODO.md](ACCESSIBILITY_TODO.md) ‚Äî Accessibility strings that localization depends on
- [TODO.md](TODO.md) ‚Äî Main project priorities
- [COMPLETED_TODOS.md](COMPLETED_TODOS.md) ‚Äî Finished work

---

**Last Updated:** 2026-02-02  
**Status:** Ready for implementation after Accessibility Phase 1

</code></pre>
        </details>
      </section>
    
        </article>
      </main>
    </div>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/prism.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/line-numbers/prism-line-numbers.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-javascript.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-jsx.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-tsx.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-css.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-json.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-markdown.min.js"></script>
  <script>
    // Lazy-load Kekule only when molecule viewer is expanded (saves bandwidth on low-end devices)
    (() => {
      let smilesDrawerLoaded = false
      let smilesDrawerLoading = false
      
      // Convert explicit SMILES like [CH3][CH](OH)[CH3] to standard like CC(O)C
      const explicitToStandard = (smiles) => {
        return smiles
          // Common organic groups - order matters (longer patterns first)
          .replace(/\[CH3\]/g, 'C')
          .replace(/\[CH2\]/g, 'C')
          .replace(/\[CH\]/g, 'C')
          .replace(/\[OH\]/g, 'O')
          .replace(/\[NH2\]/g, 'N')
          .replace(/\[NH\]/g, 'N')
          .replace(/\[SH\]/g, 'S')
          // Single atoms in brackets (keep aromatic lowercase)
          .replace(/\[C\]/g, 'C')
          .replace(/\[N\]/g, 'N')
          .replace(/\[O\]/g, 'O')
          .replace(/\[S\]/g, 'S')
          .replace(/\[P\]/g, 'P')
          .replace(/\[F\]/g, 'F')
          .replace(/\[Cl\]/g, 'Cl')
          .replace(/\[Br\]/g, 'Br')
          .replace(/\[I\]/g, 'I')
          // Bare atoms in branches - H is implicit in standard SMILES
          .replace(/\(OH\)/g, '(O)')
          .replace(/\(NH2\)/g, '(N)')
          .replace(/\(NH\)/g, '(N)')
          .replace(/\(SH\)/g, '(S)')
      }
      
      const loadSmilesDrawer = async () => {
        if (smilesDrawerLoaded) return
        if (smilesDrawerLoading) {
          return new Promise(resolve => {
            const check = setInterval(() => {
              if (smilesDrawerLoaded) { clearInterval(check); resolve() }
            }, 50)
          })
        }
        smilesDrawerLoading = true
        
        // Load SmilesDrawer from CDN (much simpler than Kekule)
        await new Promise((resolve, reject) => {
          const script = document.createElement('script')
          script.src = 'https://unpkg.com/smiles-drawer@2.1.7/dist/smiles-drawer.min.js'
          script.onload = resolve
          script.onerror = reject
          document.body.appendChild(script)
        })
        
        smilesDrawerLoaded = true
        smilesDrawerLoading = false
      }
      
      const initMolecule = async (node) => {
        if (node.dataset.initialized) return
        node.dataset.initialized = 'true'
        
        const rawSmiles = node.getAttribute('data-smiles')
        if (!rawSmiles) return
        
        // Convert explicit format to standard if needed
        const smiles = explicitToStandard(rawSmiles)
        
        try {
          await loadSmilesDrawer()
          
          const drawer = new SmilesDrawer.SvgDrawer({ 
            width: 300, 
            height: 200,
            explicitHydrogens: true,
            terminalCarbons: true,
            compactDrawing: false
          })
          
          console.log('Parsing SMILES:', rawSmiles, '->', smiles)
          SmilesDrawer.parse(smiles, (tree) => {
            console.log('Parse success, tree:', tree)
            const svgElement = drawer.draw(tree, null, 'light')
            console.log('SVG element:', svgElement)
            node.innerHTML = ''
            node.appendChild(svgElement)
          }, (err) => {
            console.error('SMILES parse error for "' + smiles + '":', err)
            node.innerHTML = '<code>' + rawSmiles + '</code>'
          })
        } catch (err) {
          console.error('SmilesDrawer load error:', err)
          node.innerHTML = '<code>' + smiles + '</code>'
        }
      }
      
      // Use IntersectionObserver for lazy loading when scrolled into view
      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            initMolecule(entry.target)
            observer.unobserve(entry.target)
          }
        })
      }, { rootMargin: '100px' })
      
      // Also handle <details> expansion for molecules inside collapsed sections
      document.addEventListener('toggle', (e) => {
        if (e.target.tagName === 'DETAILS' && e.target.open) {
          const molecules = e.target.querySelectorAll('[data-smiles]:not([data-initialized])')
          molecules.forEach(node => initMolecule(node))
        }
      }, true)
      
      // Observe all molecule nodes
      const init = () => {
        const nodes = document.querySelectorAll('[data-smiles]')
        nodes.forEach(node => observer.observe(node))
      }
      
      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', init)
      } else {
        init()
      }
    })()
  </script>
</body>
</html>